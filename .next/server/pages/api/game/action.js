"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/game/action";
exports.ids = ["pages/api/game/action"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgame%2Faction&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cgame%5Caction.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgame%2Faction&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cgame%5Caction.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_game_action_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\game\\action.js */ \"(api)/./pages/api/game/action.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_game_action_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_game_action_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/game/action\",\n        pathname: \"/api/game/action\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_game_action_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmdhbWUlMkZhY3Rpb24mcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2dhbWUlNUNhY3Rpb24uanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDMEQ7QUFDMUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHNEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxzREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sb3ZlbGV0dGVyX3dpdGhzdXBhYmFzZS8/NDY5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGdhbWVcXFxcYWN0aW9uLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZ2FtZS9hY3Rpb25cIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9nYW1lL2FjdGlvblwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgame%2Faction&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cgame%5Caction.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/game/action.js":
/*!**********************************!*\
  !*** ./pages/api/game/action.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\nconst SUPABASE_URL = process.env.SUPABASE_URL;\nconst SUPABASE_SERVICE_ROLE_KEY = process.env.SUPABASE_SERVICE_ROLE_KEY;\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY);\nfunction createDeck() {\n    const cards = [];\n    for(let i = 0; i < 5; i++)cards.push({\n        name: \"Guard\",\n        value: 1\n    });\n    for(let i = 0; i < 2; i++)cards.push({\n        name: \"Priest\",\n        value: 2\n    });\n    for(let i = 0; i < 2; i++)cards.push({\n        name: \"Baron\",\n        value: 3\n    });\n    for(let i = 0; i < 2; i++)cards.push({\n        name: \"Handmaid\",\n        value: 4\n    });\n    for(let i = 0; i < 2; i++)cards.push({\n        name: \"Prince\",\n        value: 5\n    });\n    cards.push({\n        name: \"King\",\n        value: 6\n    });\n    cards.push({\n        name: \"Countess\",\n        value: 7\n    });\n    cards.push({\n        name: \"Princess\",\n        value: 8\n    });\n    return shuffle(cards);\n}\nfunction shuffle(arr) {\n    return arr.slice().sort(()=>Math.random() - 0.5);\n}\nasync function upsertGame(code, state) {\n    const { error } = await supabase.from(\"games\").upsert({\n        code,\n        state\n    }, {\n        onConflict: \"code\"\n    });\n    if (error) throw error;\n}\nasync function getGame(code) {\n    const { data, error } = await supabase.from(\"games\").select(\"*\").eq(\"code\", code).maybeSingle();\n    if (error) throw error;\n    return data;\n}\nasync function handler(req, res) {\n    if (req.method !== \"POST\") return res.status(405).json({\n        error: \"Only POST\"\n    });\n    const body = req.body || {};\n    const { action } = body;\n    try {\n        if (action === \"create\") {\n            const playerName = body.playerName || \"Player\";\n            const code = Math.random().toString(36).substring(2, 6).toUpperCase();\n            const pid = body.pid || \"p_\" + Math.random().toString(36).slice(2, 9);\n            const state = {\n                code,\n                players: [\n                    {\n                        id: pid,\n                        name: playerName,\n                        hand: [],\n                        tokens: 0,\n                        eliminated: false\n                    }\n                ],\n                deck: [],\n                started: false,\n                currentPlayerIndex: 0,\n                log: [],\n                chat: [],\n                burn: null\n            };\n            await upsertGame(code, state);\n            return res.status(200).json({\n                code,\n                pid\n            });\n        }\n        if (action === \"join\") {\n            const { code, playerName, pid } = body;\n            const row = await getGame(code);\n            if (!row) return res.status(404).json({\n                ok: false,\n                message: \"game not found\"\n            });\n            const state = row.state;\n            if (state.started) return res.status(400).json({\n                ok: false,\n                message: \"already started\"\n            });\n            const canonicalPid = pid || \"p_\" + Math.random().toString(36).slice(2, 9);\n            const exists = state.players.find((p)=>p.id === canonicalPid || p.name === playerName);\n            if (!exists) {\n                state.players.push({\n                    id: canonicalPid,\n                    name: playerName,\n                    hand: [],\n                    tokens: 0,\n                    eliminated: false\n                });\n            }\n            await upsertGame(code, state);\n            return res.status(200).json({\n                ok: true,\n                pid: canonicalPid\n            });\n        }\n        if (action === \"start\") {\n            const { code } = body;\n            const row = await getGame(code);\n            if (!row) return res.status(404).json({\n                ok: false,\n                message: \"game not found\"\n            });\n            const state = row.state;\n            if (state.started) return res.status(400).json({\n                ok: false,\n                message: \"already started\"\n            });\n            state.started = true;\n            state.deck = createDeck();\n            state.burn = state.deck.pop();\n            state.players.forEach((p)=>{\n                p.hand = [\n                    state.deck.pop()\n                ];\n                p.eliminated = false;\n                p.protected = false;\n            });\n            state.currentPlayerIndex = 0;\n            state.log = [];\n            if (state.deck.length > 0) state.players[0].hand.push(state.deck.pop());\n            await upsertGame(code, state);\n            return res.status(200).json({\n                ok: true\n            });\n        }\n        if (action === \"chat\") {\n            const { code, message, pid, playerName } = body;\n            const row = await getGame(code);\n            if (!row) return res.status(404).json({\n                ok: false,\n                message: \"game not found\"\n            });\n            const state = row.state;\n            // prefer pid to find sender; fallback to provided playerName; fallback to 'Unknown'\n            let senderName = \"Unknown\";\n            if (pid) {\n                const p = state.players.find((x)=>x.id === pid);\n                if (p) senderName = p.name;\n            }\n            if (senderName === \"Unknown\" && playerName) senderName = playerName;\n            const entry = {\n                sender: senderName,\n                message,\n                ts: Date.now()\n            };\n            state.chat = state.chat || [];\n            state.chat.push(entry);\n            await upsertGame(code, state);\n            return res.status(200).json({\n                ok: true\n            });\n        }\n        if (action === \"play\") {\n            const { code, cardIndex, targetId, guessedCard, pid } = body;\n            const row = await getGame(code);\n            if (!row) return res.status(404).json({\n                ok: false,\n                message: \"game not found\"\n            });\n            const state = row.state;\n            const playerIndex = state.players.findIndex((p)=>p.id === pid);\n            if (playerIndex === -1) return res.status(400).json({\n                ok: false,\n                message: \"player not found\"\n            });\n            if (playerIndex !== state.currentPlayerIndex) return res.status(400).json({\n                ok: false,\n                message: \"not your turn\"\n            });\n            const player = state.players[playerIndex];\n            if (player.eliminated) return res.status(400).json({\n                ok: false,\n                message: \"eliminated\"\n            });\n            if (cardIndex < 0 || cardIndex >= player.hand.length) return res.status(400).json({\n                ok: false,\n                message: \"invalid card index\"\n            });\n            // Enforce Countess rule BEFORE removing played card\n            const candidate = player.hand[cardIndex];\n            const other = player.hand.find((_, i)=>i !== cardIndex);\n            if (other && other.name === \"Countess\" && (candidate.name === \"King\" || candidate.name === \"Prince\")) {\n                return res.status(400).json({\n                    ok: false,\n                    message: \"Countess rule: must discard Countess if holding with King/Prince\"\n                });\n            }\n            // Remove the played card\n            const card = player.hand.splice(cardIndex, 1)[0];\n            state.log = state.log || [];\n            state.log.push(`${player.name} played ${card.name}.`);\n            // target validations\n            if (targetId) {\n                const t = state.players.find((p)=>p.id === targetId);\n                if (!t) return res.status(400).json({\n                    ok: false,\n                    message: \"target not found\"\n                });\n                if (t.protected) return res.status(400).json({\n                    ok: false,\n                    message: \"target protected by Handmaid\"\n                });\n            }\n            switch(card.name){\n                case \"Guard\":\n                    {\n                        if (!targetId) return res.status(400).json({\n                            ok: false,\n                            message: \"Guard needs a target\"\n                        });\n                        if (!guessedCard || guessedCard === \"Guard\") return res.status(400).json({\n                            ok: false,\n                            message: \"Invalid guess\"\n                        });\n                        const tgt = state.players.find((p)=>p.id === targetId);\n                        if (!tgt?.hand?.length) return res.status(400).json({\n                            ok: false,\n                            message: \"Target has no card\"\n                        });\n                        const actual = tgt.hand[0].name;\n                        if (actual === guessedCard) {\n                            tgt.eliminated = true;\n                            state.log.push(`${player.name} guessed ${guessedCard} correctly — ${tgt.name} is eliminated.`);\n                        } else {\n                            state.log.push(`${player.name} guessed ${guessedCard} — wrong.`);\n                        }\n                        break;\n                    }\n                case \"Priest\":\n                    {\n                        if (!targetId) return res.status(400).json({\n                            ok: false,\n                            message: \"Priest needs a target\"\n                        });\n                        const tgt = state.players.find((p)=>p.id === targetId);\n                        if (!tgt?.hand?.length) return res.status(400).json({\n                            ok: false,\n                            message: \"Target has no card\"\n                        });\n                        state.log.push(`${player.name} used Priest on ${tgt.name}.`);\n                        break;\n                    }\n                case \"Baron\":\n                    {\n                        if (!targetId) return res.status(400).json({\n                            ok: false,\n                            message: \"Baron needs a target\"\n                        });\n                        const tgt = state.players.find((p)=>p.id === targetId);\n                        const myCard = player.hand[0];\n                        const theirCard = tgt?.hand?.[0];\n                        if (!myCard || !theirCard) return res.status(400).json({\n                            ok: false,\n                            message: \"Both must have a card\"\n                        });\n                        if (myCard.value > theirCard.value) {\n                            tgt.eliminated = true;\n                            state.log.push(`${player.name} (${myCard.name}) beat ${tgt.name} (${theirCard.name}).`);\n                        } else if (myCard.value < theirCard.value) {\n                            player.eliminated = true;\n                            state.log.push(`${tgt.name} (${theirCard.name}) beat ${player.name} (${myCard.name}).`);\n                        } else {\n                            state.log.push(`${player.name} and ${tgt.name} tied with ${myCard.name}.`);\n                        }\n                        break;\n                    }\n                case \"Handmaid\":\n                    {\n                        player.protected = true;\n                        state.log.push(`${player.name} is protected until their next turn.`);\n                        break;\n                    }\n                case \"Prince\":\n                    {\n                        if (!targetId) return res.status(400).json({\n                            ok: false,\n                            message: \"Prince needs a target\"\n                        });\n                        const tgt = state.players.find((p)=>p.id === targetId);\n                        const discarded = tgt?.hand?.pop();\n                        if (!discarded) return res.status(400).json({\n                            ok: false,\n                            message: \"Target has no card\"\n                        });\n                        state.log.push(`${tgt.name} discarded ${discarded.name} due to Prince.`);\n                        if (discarded.name === \"Princess\") {\n                            tgt.eliminated = true;\n                            state.log.push(`${tgt.name} discarded the Princess and was eliminated.`);\n                        } else {\n                            if (state.deck.length > 0) tgt.hand = [\n                                state.deck.pop()\n                            ];\n                            else tgt.hand = [];\n                        }\n                        break;\n                    }\n                case \"King\":\n                    {\n                        if (!targetId) return res.status(400).json({\n                            ok: false,\n                            message: \"King needs a target\"\n                        });\n                        const tgt = state.players.find((p)=>p.id === targetId);\n                        if (!tgt?.hand?.length || !player.hand?.length) return res.status(400).json({\n                            ok: false,\n                            message: \"Both need a card to swap\"\n                        });\n                        const tmp = player.hand[0];\n                        player.hand[0] = tgt.hand[0];\n                        tgt.hand[0] = tmp;\n                        state.log.push(`${player.name} swapped hands with ${tgt.name}.`);\n                        break;\n                    }\n                case \"Countess\":\n                    {\n                        state.log.push(`${player.name} discarded the Countess.`);\n                        break;\n                    }\n                case \"Princess\":\n                    {\n                        player.eliminated = true;\n                        state.log.push(`${player.name} discarded the Princess and was eliminated.`);\n                        break;\n                    }\n            }\n            // Round end checks\n            const active = state.players.filter((p)=>!p.eliminated);\n            const newRound = ()=>{\n                state.deck = createDeck();\n                state.burn = state.deck.pop();\n                state.players.forEach((p)=>{\n                    p.hand = [\n                        state.deck.pop()\n                    ];\n                    p.eliminated = false;\n                    p.protected = false;\n                });\n                state.currentPlayerIndex = 0;\n                if (state.deck.length > 0) state.players[0].hand.push(state.deck.pop());\n            };\n            if (active.length <= 1) {\n                const winner = active[0];\n                if (winner) winner.tokens = (winner.tokens || 0) + 1;\n                state.log.push(`${winner ? winner.name : \"No one\"} won the round (last player standing).`);\n                newRound();\n                await upsertGame(code, state);\n                return res.status(200).json({\n                    ok: true\n                });\n            }\n            if (state.deck.length === 0) {\n                const living = state.players.filter((p)=>!p.eliminated && p.hand?.length > 0);\n                if (living.length > 0) {\n                    living.sort((a, b)=>b.hand[0].value - a.hand[0].value);\n                    living[0].tokens = (living[0].tokens || 0) + 1;\n                    state.log.push(`${living[0].name} won the round (highest card when deck empty).`);\n                }\n                newRound();\n                await upsertGame(code, state);\n                return res.status(200).json({\n                    ok: true\n                });\n            }\n            // Next turn\n            do {\n                state.currentPlayerIndex = (state.currentPlayerIndex + 1) % state.players.length;\n            }while (state.players[state.currentPlayerIndex].eliminated);\n            if (state.players[state.currentPlayerIndex].protected) delete state.players[state.currentPlayerIndex].protected;\n            if (state.deck.length > 0) state.players[state.currentPlayerIndex].hand.push(state.deck.pop());\n            await upsertGame(code, state);\n            return res.status(200).json({\n                ok: true\n            });\n        }\n        return res.status(400).json({\n            ok: false,\n            message: \"unknown action\"\n        });\n    } catch (err) {\n        console.error(\"action error\", err);\n        return res.status(500).json({\n            ok: false,\n            error: String(err)\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TSxHQUFDLEdBQUc1QyxNQUFNdUIsT0FBTyxDQUFDdkIsTUFBTThCLGtCQUFrQixDQUFDLENBQUNMLElBQUksQ0FBQ3BDLElBQUksQ0FBQ1csTUFBTTRCLElBQUksQ0FBQ2EsR0FBRztZQUV4RixNQUFNM0MsV0FBV0MsTUFBTUM7WUFDdkIsT0FBT1ksSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRW9CLElBQUc7WUFBSztRQUN4QztRQUVBLE9BQU92QixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVvQixJQUFHO1lBQU9DLFNBQVE7UUFBaUI7SUFDbkUsRUFBQyxPQUFNeUMsS0FBSTtRQUNUQyxRQUFRN0UsS0FBSyxDQUFDLGdCQUFnQjRFO1FBQzlCLE9BQU9qRSxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVvQixJQUFHO1lBQU9sQyxPQUFPOEUsT0FBT0Y7UUFBSztJQUM3RDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbG92ZWxldHRlcl93aXRoc3VwYWJhc2UvLi9wYWdlcy9hcGkvZ2FtZS9hY3Rpb24uanM/YjJhNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xyXG5cclxuY29uc3QgU1VQQUJBU0VfVVJMID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfVVJMO1xyXG5jb25zdCBTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWTtcclxuY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoU1VQQUJBU0VfVVJMLCBTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZKTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZURlY2soKXtcclxuICBjb25zdCBjYXJkcz1bXTtcclxuICBmb3IobGV0IGk9MDtpPDU7aSsrKSBjYXJkcy5wdXNoKHtuYW1lOidHdWFyZCcsIHZhbHVlOjF9KTtcclxuICBmb3IobGV0IGk9MDtpPDI7aSsrKSBjYXJkcy5wdXNoKHtuYW1lOidQcmllc3QnLCB2YWx1ZToyfSk7XHJcbiAgZm9yKGxldCBpPTA7aTwyO2krKykgY2FyZHMucHVzaCh7bmFtZTonQmFyb24nLCB2YWx1ZTozfSk7XHJcbiAgZm9yKGxldCBpPTA7aTwyO2krKykgY2FyZHMucHVzaCh7bmFtZTonSGFuZG1haWQnLCB2YWx1ZTo0fSk7XHJcbiAgZm9yKGxldCBpPTA7aTwyO2krKykgY2FyZHMucHVzaCh7bmFtZTonUHJpbmNlJywgdmFsdWU6NX0pO1xyXG4gIGNhcmRzLnB1c2goe25hbWU6J0tpbmcnLCB2YWx1ZTo2fSk7XHJcbiAgY2FyZHMucHVzaCh7bmFtZTonQ291bnRlc3MnLCB2YWx1ZTo3fSk7XHJcbiAgY2FyZHMucHVzaCh7bmFtZTonUHJpbmNlc3MnLCB2YWx1ZTo4fSk7XHJcbiAgcmV0dXJuIHNodWZmbGUoY2FyZHMpO1xyXG59XHJcbmZ1bmN0aW9uIHNodWZmbGUoYXJyKXsgcmV0dXJuIGFyci5zbGljZSgpLnNvcnQoKCk9Pk1hdGgucmFuZG9tKCktMC41KTsgfVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gdXBzZXJ0R2FtZShjb2RlLCBzdGF0ZSl7XHJcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnZ2FtZXMnKS51cHNlcnQoeyBjb2RlLCBzdGF0ZSB9LCB7IG9uQ29uZmxpY3Q6ICdjb2RlJyB9KTtcclxuICBpZihlcnJvcikgdGhyb3cgZXJyb3I7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gZ2V0R2FtZShjb2RlKXtcclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdnYW1lcycpLnNlbGVjdCgnKicpLmVxKCdjb2RlJywgY29kZSkubWF5YmVTaW5nbGUoKTtcclxuICBpZihlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpe1xyXG4gIGlmKHJlcS5tZXRob2QgIT09ICdQT1NUJykgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6J09ubHkgUE9TVCcgfSk7XHJcbiAgY29uc3QgYm9keSA9IHJlcS5ib2R5IHx8IHt9O1xyXG4gIGNvbnN0IHsgYWN0aW9uIH0gPSBib2R5O1xyXG4gIHRyeXtcclxuICAgIGlmKGFjdGlvbiA9PT0gJ2NyZWF0ZScpe1xyXG4gICAgICBjb25zdCBwbGF5ZXJOYW1lID0gYm9keS5wbGF5ZXJOYW1lIHx8ICdQbGF5ZXInO1xyXG4gICAgICBjb25zdCBjb2RlID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsNikudG9VcHBlckNhc2UoKTtcclxuICAgICAgY29uc3QgcGlkID0gYm9keS5waWQgfHwgKCdwXycrTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMiw5KSk7XHJcbiAgICAgIGNvbnN0IHN0YXRlID0ge1xyXG4gICAgICAgIGNvZGUsXHJcbiAgICAgICAgcGxheWVyczogW3sgaWQ6IHBpZCwgbmFtZTogcGxheWVyTmFtZSwgaGFuZDogW10sIHRva2VuczogMCwgZWxpbWluYXRlZDogZmFsc2UgfV0sXHJcbiAgICAgICAgZGVjazogW10sXHJcbiAgICAgICAgc3RhcnRlZDogZmFsc2UsXHJcbiAgICAgICAgY3VycmVudFBsYXllckluZGV4OiAwLFxyXG4gICAgICAgIGxvZzogW10sXHJcbiAgICAgICAgY2hhdDogW10sXHJcbiAgICAgICAgYnVybjogbnVsbFxyXG4gICAgICB9O1xyXG4gICAgICBhd2FpdCB1cHNlcnRHYW1lKGNvZGUsIHN0YXRlKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgY29kZSwgcGlkIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKGFjdGlvbiA9PT0gJ2pvaW4nKXtcclxuICAgICAgY29uc3QgeyBjb2RlLCBwbGF5ZXJOYW1lLCBwaWQgfSA9IGJvZHk7XHJcbiAgICAgIGNvbnN0IHJvdyA9IGF3YWl0IGdldEdhbWUoY29kZSk7XHJcbiAgICAgIGlmKCFyb3cpIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG9rOmZhbHNlLCBtZXNzYWdlOidnYW1lIG5vdCBmb3VuZCcgfSk7XHJcbiAgICAgIGNvbnN0IHN0YXRlID0gcm93LnN0YXRlO1xyXG4gICAgICBpZihzdGF0ZS5zdGFydGVkKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBvazpmYWxzZSwgbWVzc2FnZTonYWxyZWFkeSBzdGFydGVkJyB9KTtcclxuICAgICAgY29uc3QgY2Fub25pY2FsUGlkID0gcGlkIHx8ICgncF8nK01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIsOSkpO1xyXG4gICAgICBjb25zdCBleGlzdHMgPSBzdGF0ZS5wbGF5ZXJzLmZpbmQocCA9PiBwLmlkID09PSBjYW5vbmljYWxQaWQgfHwgcC5uYW1lID09PSBwbGF5ZXJOYW1lKTtcclxuICAgICAgaWYoIWV4aXN0cyl7XHJcbiAgICAgICAgc3RhdGUucGxheWVycy5wdXNoKHsgaWQ6IGNhbm9uaWNhbFBpZCwgbmFtZTogcGxheWVyTmFtZSwgaGFuZDogW10sIHRva2VuczogMCwgZWxpbWluYXRlZDogZmFsc2UgfSk7XHJcbiAgICAgIH1cclxuICAgICAgYXdhaXQgdXBzZXJ0R2FtZShjb2RlLCBzdGF0ZSk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG9rOnRydWUsIHBpZDogY2Fub25pY2FsUGlkIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKGFjdGlvbiA9PT0gJ3N0YXJ0Jyl7XHJcbiAgICAgIGNvbnN0IHsgY29kZSB9ID0gYm9keTtcclxuICAgICAgY29uc3Qgcm93ID0gYXdhaXQgZ2V0R2FtZShjb2RlKTtcclxuICAgICAgaWYoIXJvdykgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgb2s6ZmFsc2UsIG1lc3NhZ2U6J2dhbWUgbm90IGZvdW5kJyB9KTtcclxuICAgICAgY29uc3Qgc3RhdGUgPSByb3cuc3RhdGU7XHJcbiAgICAgIGlmKHN0YXRlLnN0YXJ0ZWQpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG9rOmZhbHNlLCBtZXNzYWdlOidhbHJlYWR5IHN0YXJ0ZWQnIH0pO1xyXG4gICAgICBzdGF0ZS5zdGFydGVkID0gdHJ1ZTtcclxuICAgICAgc3RhdGUuZGVjayA9IGNyZWF0ZURlY2soKTtcclxuICAgICAgc3RhdGUuYnVybiA9IHN0YXRlLmRlY2sucG9wKCk7XHJcbiAgICAgIHN0YXRlLnBsYXllcnMuZm9yRWFjaChwID0+IHsgcC5oYW5kID0gWyBzdGF0ZS5kZWNrLnBvcCgpIF07IHAuZWxpbWluYXRlZCA9IGZhbHNlOyBwLnByb3RlY3RlZCA9IGZhbHNlOyB9KTtcclxuICAgICAgc3RhdGUuY3VycmVudFBsYXllckluZGV4ID0gMDtcclxuICAgICAgc3RhdGUubG9nID0gW107XHJcbiAgICAgIGlmKHN0YXRlLmRlY2subGVuZ3RoPjApIHN0YXRlLnBsYXllcnNbMF0uaGFuZC5wdXNoKHN0YXRlLmRlY2sucG9wKCkpO1xyXG4gICAgICBhd2FpdCB1cHNlcnRHYW1lKGNvZGUsIHN0YXRlKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgb2s6dHJ1ZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZihhY3Rpb24gPT09ICdjaGF0Jyl7XHJcbiAgICAgIGNvbnN0IHsgY29kZSwgbWVzc2FnZSwgcGlkLCBwbGF5ZXJOYW1lIH0gPSBib2R5O1xyXG4gICAgICBjb25zdCByb3cgPSBhd2FpdCBnZXRHYW1lKGNvZGUpO1xyXG4gICAgICBpZighcm93KSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBvazpmYWxzZSwgbWVzc2FnZTonZ2FtZSBub3QgZm91bmQnIH0pO1xyXG4gICAgICBjb25zdCBzdGF0ZSA9IHJvdy5zdGF0ZTtcclxuICAgICAgLy8gcHJlZmVyIHBpZCB0byBmaW5kIHNlbmRlcjsgZmFsbGJhY2sgdG8gcHJvdmlkZWQgcGxheWVyTmFtZTsgZmFsbGJhY2sgdG8gJ1Vua25vd24nXHJcbiAgICAgIGxldCBzZW5kZXJOYW1lID0gJ1Vua25vd24nO1xyXG4gICAgICBpZihwaWQpe1xyXG4gICAgICAgIGNvbnN0IHAgPSBzdGF0ZS5wbGF5ZXJzLmZpbmQoeD0+eC5pZD09PXBpZCk7XHJcbiAgICAgICAgaWYocCkgc2VuZGVyTmFtZSA9IHAubmFtZTtcclxuICAgICAgfVxyXG4gICAgICBpZihzZW5kZXJOYW1lID09PSAnVW5rbm93bicgJiYgcGxheWVyTmFtZSkgc2VuZGVyTmFtZSA9IHBsYXllck5hbWU7XHJcbiAgICAgIGNvbnN0IGVudHJ5ID0geyBzZW5kZXI6IHNlbmRlck5hbWUsIG1lc3NhZ2UsIHRzOiBEYXRlLm5vdygpIH07XHJcbiAgICAgIHN0YXRlLmNoYXQgPSBzdGF0ZS5jaGF0IHx8IFtdO1xyXG4gICAgICBzdGF0ZS5jaGF0LnB1c2goZW50cnkpO1xyXG4gICAgICBhd2FpdCB1cHNlcnRHYW1lKGNvZGUsIHN0YXRlKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgb2s6dHJ1ZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZihhY3Rpb24gPT09ICdwbGF5Jyl7XHJcbiAgICAgIGNvbnN0IHsgY29kZSwgY2FyZEluZGV4LCB0YXJnZXRJZCwgZ3Vlc3NlZENhcmQsIHBpZCB9ID0gYm9keTtcclxuICAgICAgY29uc3Qgcm93ID0gYXdhaXQgZ2V0R2FtZShjb2RlKTtcclxuICAgICAgaWYoIXJvdykgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgb2s6ZmFsc2UsIG1lc3NhZ2U6J2dhbWUgbm90IGZvdW5kJyB9KTtcclxuICAgICAgY29uc3Qgc3RhdGUgPSByb3cuc3RhdGU7XHJcbiAgICAgIGNvbnN0IHBsYXllckluZGV4ID0gc3RhdGUucGxheWVycy5maW5kSW5kZXgocD0+cC5pZD09PXBpZCk7XHJcbiAgICAgIGlmKHBsYXllckluZGV4ID09PSAtMSkgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgb2s6ZmFsc2UsIG1lc3NhZ2U6J3BsYXllciBub3QgZm91bmQnIH0pO1xyXG4gICAgICBpZihwbGF5ZXJJbmRleCAhPT0gc3RhdGUuY3VycmVudFBsYXllckluZGV4KSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBvazpmYWxzZSwgbWVzc2FnZTonbm90IHlvdXIgdHVybicgfSk7XHJcblxyXG4gICAgICBjb25zdCBwbGF5ZXIgPSBzdGF0ZS5wbGF5ZXJzW3BsYXllckluZGV4XTtcclxuICAgICAgaWYocGxheWVyLmVsaW1pbmF0ZWQpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG9rOmZhbHNlLCBtZXNzYWdlOidlbGltaW5hdGVkJyB9KTtcclxuICAgICAgaWYoY2FyZEluZGV4IDwgMCB8fCBjYXJkSW5kZXggPj0gcGxheWVyLmhhbmQubGVuZ3RoKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBvazpmYWxzZSwgbWVzc2FnZTonaW52YWxpZCBjYXJkIGluZGV4JyB9KTtcclxuXHJcbiAgICAgIC8vIEVuZm9yY2UgQ291bnRlc3MgcnVsZSBCRUZPUkUgcmVtb3ZpbmcgcGxheWVkIGNhcmRcclxuICAgICAgY29uc3QgY2FuZGlkYXRlID0gcGxheWVyLmhhbmRbY2FyZEluZGV4XTtcclxuICAgICAgY29uc3Qgb3RoZXIgPSBwbGF5ZXIuaGFuZC5maW5kKChfLGkpPT5pIT09Y2FyZEluZGV4KTtcclxuICAgICAgaWYob3RoZXIgJiYgb3RoZXIubmFtZSA9PT0gJ0NvdW50ZXNzJyAmJiAoY2FuZGlkYXRlLm5hbWUgPT09ICdLaW5nJyB8fCBjYW5kaWRhdGUubmFtZSA9PT0gJ1ByaW5jZScpKXtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBvazpmYWxzZSwgbWVzc2FnZTonQ291bnRlc3MgcnVsZTogbXVzdCBkaXNjYXJkIENvdW50ZXNzIGlmIGhvbGRpbmcgd2l0aCBLaW5nL1ByaW5jZScgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFJlbW92ZSB0aGUgcGxheWVkIGNhcmRcclxuICAgICAgY29uc3QgY2FyZCA9IHBsYXllci5oYW5kLnNwbGljZShjYXJkSW5kZXgsMSlbMF07XHJcblxyXG4gICAgICBzdGF0ZS5sb2cgPSBzdGF0ZS5sb2cgfHwgW107XHJcbiAgICAgIHN0YXRlLmxvZy5wdXNoKGAke3BsYXllci5uYW1lfSBwbGF5ZWQgJHtjYXJkLm5hbWV9LmApO1xyXG5cclxuICAgICAgLy8gdGFyZ2V0IHZhbGlkYXRpb25zXHJcbiAgICAgIGlmKHRhcmdldElkKXtcclxuICAgICAgICBjb25zdCB0ID0gc3RhdGUucGxheWVycy5maW5kKHA9PnAuaWQ9PT10YXJnZXRJZCk7XHJcbiAgICAgICAgaWYoIXQpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG9rOmZhbHNlLCBtZXNzYWdlOid0YXJnZXQgbm90IGZvdW5kJyB9KTtcclxuICAgICAgICBpZih0LnByb3RlY3RlZCkgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgb2s6ZmFsc2UsIG1lc3NhZ2U6J3RhcmdldCBwcm90ZWN0ZWQgYnkgSGFuZG1haWQnIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzd2l0Y2goY2FyZC5uYW1lKXtcclxuICAgICAgICBjYXNlICdHdWFyZCc6e1xyXG4gICAgICAgICAgaWYoIXRhcmdldElkKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBvazpmYWxzZSwgbWVzc2FnZTonR3VhcmQgbmVlZHMgYSB0YXJnZXQnIH0pO1xyXG4gICAgICAgICAgaWYoIWd1ZXNzZWRDYXJkIHx8IGd1ZXNzZWRDYXJkPT09J0d1YXJkJykgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgb2s6ZmFsc2UsIG1lc3NhZ2U6J0ludmFsaWQgZ3Vlc3MnIH0pO1xyXG4gICAgICAgICAgY29uc3QgdGd0ID0gc3RhdGUucGxheWVycy5maW5kKHA9PnAuaWQ9PT10YXJnZXRJZCk7XHJcbiAgICAgICAgICBpZighdGd0Py5oYW5kPy5sZW5ndGgpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG9rOmZhbHNlLCBtZXNzYWdlOidUYXJnZXQgaGFzIG5vIGNhcmQnIH0pO1xyXG4gICAgICAgICAgY29uc3QgYWN0dWFsID0gdGd0LmhhbmRbMF0ubmFtZTtcclxuICAgICAgICAgIGlmKGFjdHVhbCA9PT0gZ3Vlc3NlZENhcmQpe1xyXG4gICAgICAgICAgICB0Z3QuZWxpbWluYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHN0YXRlLmxvZy5wdXNoKGAke3BsYXllci5uYW1lfSBndWVzc2VkICR7Z3Vlc3NlZENhcmR9IGNvcnJlY3RseSDigJQgJHt0Z3QubmFtZX0gaXMgZWxpbWluYXRlZC5gKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN0YXRlLmxvZy5wdXNoKGAke3BsYXllci5uYW1lfSBndWVzc2VkICR7Z3Vlc3NlZENhcmR9IOKAlCB3cm9uZy5gKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXNlICdQcmllc3QnOntcclxuICAgICAgICAgIGlmKCF0YXJnZXRJZCkgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgb2s6ZmFsc2UsIG1lc3NhZ2U6J1ByaWVzdCBuZWVkcyBhIHRhcmdldCcgfSk7XHJcbiAgICAgICAgICBjb25zdCB0Z3QgPSBzdGF0ZS5wbGF5ZXJzLmZpbmQocD0+cC5pZD09PXRhcmdldElkKTtcclxuICAgICAgICAgIGlmKCF0Z3Q/LmhhbmQ/Lmxlbmd0aCkgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgb2s6ZmFsc2UsIG1lc3NhZ2U6J1RhcmdldCBoYXMgbm8gY2FyZCcgfSk7XHJcbiAgICAgICAgICBzdGF0ZS5sb2cucHVzaChgJHtwbGF5ZXIubmFtZX0gdXNlZCBQcmllc3Qgb24gJHt0Z3QubmFtZX0uYCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSAnQmFyb24nOntcclxuICAgICAgICAgIGlmKCF0YXJnZXRJZCkgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgb2s6ZmFsc2UsIG1lc3NhZ2U6J0Jhcm9uIG5lZWRzIGEgdGFyZ2V0JyB9KTtcclxuICAgICAgICAgIGNvbnN0IHRndCA9IHN0YXRlLnBsYXllcnMuZmluZChwPT5wLmlkPT09dGFyZ2V0SWQpO1xyXG4gICAgICAgICAgY29uc3QgbXlDYXJkID0gcGxheWVyLmhhbmRbMF07XHJcbiAgICAgICAgICBjb25zdCB0aGVpckNhcmQgPSB0Z3Q/LmhhbmQ/LlswXTtcclxuICAgICAgICAgIGlmKCFteUNhcmQgfHwgIXRoZWlyQ2FyZCkgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgb2s6ZmFsc2UsIG1lc3NhZ2U6J0JvdGggbXVzdCBoYXZlIGEgY2FyZCcgfSk7XHJcbiAgICAgICAgICBpZihteUNhcmQudmFsdWUgPiB0aGVpckNhcmQudmFsdWUpeyB0Z3QuZWxpbWluYXRlZCA9IHRydWU7IHN0YXRlLmxvZy5wdXNoKGAke3BsYXllci5uYW1lfSAoJHtteUNhcmQubmFtZX0pIGJlYXQgJHt0Z3QubmFtZX0gKCR7dGhlaXJDYXJkLm5hbWV9KS5gKTsgfVxyXG4gICAgICAgICAgZWxzZSBpZihteUNhcmQudmFsdWUgPCB0aGVpckNhcmQudmFsdWUpeyBwbGF5ZXIuZWxpbWluYXRlZCA9IHRydWU7IHN0YXRlLmxvZy5wdXNoKGAke3RndC5uYW1lfSAoJHt0aGVpckNhcmQubmFtZX0pIGJlYXQgJHtwbGF5ZXIubmFtZX0gKCR7bXlDYXJkLm5hbWV9KS5gKTsgfVxyXG4gICAgICAgICAgZWxzZSB7IHN0YXRlLmxvZy5wdXNoKGAke3BsYXllci5uYW1lfSBhbmQgJHt0Z3QubmFtZX0gdGllZCB3aXRoICR7bXlDYXJkLm5hbWV9LmApOyB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSAnSGFuZG1haWQnOntcclxuICAgICAgICAgIHBsYXllci5wcm90ZWN0ZWQgPSB0cnVlOyBzdGF0ZS5sb2cucHVzaChgJHtwbGF5ZXIubmFtZX0gaXMgcHJvdGVjdGVkIHVudGlsIHRoZWlyIG5leHQgdHVybi5gKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXNlICdQcmluY2UnOntcclxuICAgICAgICAgIGlmKCF0YXJnZXRJZCkgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgb2s6ZmFsc2UsIG1lc3NhZ2U6J1ByaW5jZSBuZWVkcyBhIHRhcmdldCcgfSk7XHJcbiAgICAgICAgICBjb25zdCB0Z3QgPSBzdGF0ZS5wbGF5ZXJzLmZpbmQocD0+cC5pZD09PXRhcmdldElkKTtcclxuICAgICAgICAgIGNvbnN0IGRpc2NhcmRlZCA9IHRndD8uaGFuZD8ucG9wKCk7XHJcbiAgICAgICAgICBpZighZGlzY2FyZGVkKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBvazpmYWxzZSwgbWVzc2FnZTonVGFyZ2V0IGhhcyBubyBjYXJkJyB9KTtcclxuICAgICAgICAgIHN0YXRlLmxvZy5wdXNoKGAke3RndC5uYW1lfSBkaXNjYXJkZWQgJHtkaXNjYXJkZWQubmFtZX0gZHVlIHRvIFByaW5jZS5gKTtcclxuICAgICAgICAgIGlmKGRpc2NhcmRlZC5uYW1lPT09J1ByaW5jZXNzJyl7IHRndC5lbGltaW5hdGVkID0gdHJ1ZTsgc3RhdGUubG9nLnB1c2goYCR7dGd0Lm5hbWV9IGRpc2NhcmRlZCB0aGUgUHJpbmNlc3MgYW5kIHdhcyBlbGltaW5hdGVkLmApOyB9XHJcbiAgICAgICAgICBlbHNlIHsgaWYoc3RhdGUuZGVjay5sZW5ndGg+MCkgdGd0LmhhbmQgPSBbIHN0YXRlLmRlY2sucG9wKCkgXTsgZWxzZSB0Z3QuaGFuZCA9IFtdOyB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSAnS2luZyc6e1xyXG4gICAgICAgICAgaWYoIXRhcmdldElkKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBvazpmYWxzZSwgbWVzc2FnZTonS2luZyBuZWVkcyBhIHRhcmdldCcgfSk7XHJcbiAgICAgICAgICBjb25zdCB0Z3QgPSBzdGF0ZS5wbGF5ZXJzLmZpbmQocD0+cC5pZD09PXRhcmdldElkKTtcclxuICAgICAgICAgIGlmKCF0Z3Q/LmhhbmQ/Lmxlbmd0aCB8fCAhcGxheWVyLmhhbmQ/Lmxlbmd0aCkgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgb2s6ZmFsc2UsIG1lc3NhZ2U6J0JvdGggbmVlZCBhIGNhcmQgdG8gc3dhcCcgfSk7XHJcbiAgICAgICAgICBjb25zdCB0bXAgPSBwbGF5ZXIuaGFuZFswXTsgcGxheWVyLmhhbmRbMF0gPSB0Z3QuaGFuZFswXTsgdGd0LmhhbmRbMF0gPSB0bXA7XHJcbiAgICAgICAgICBzdGF0ZS5sb2cucHVzaChgJHtwbGF5ZXIubmFtZX0gc3dhcHBlZCBoYW5kcyB3aXRoICR7dGd0Lm5hbWV9LmApO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgJ0NvdW50ZXNzJzp7XHJcbiAgICAgICAgICBzdGF0ZS5sb2cucHVzaChgJHtwbGF5ZXIubmFtZX0gZGlzY2FyZGVkIHRoZSBDb3VudGVzcy5gKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXNlICdQcmluY2Vzcyc6e1xyXG4gICAgICAgICAgcGxheWVyLmVsaW1pbmF0ZWQgPSB0cnVlOyBzdGF0ZS5sb2cucHVzaChgJHtwbGF5ZXIubmFtZX0gZGlzY2FyZGVkIHRoZSBQcmluY2VzcyBhbmQgd2FzIGVsaW1pbmF0ZWQuYCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFJvdW5kIGVuZCBjaGVja3NcclxuICAgICAgY29uc3QgYWN0aXZlID0gc3RhdGUucGxheWVycy5maWx0ZXIocD0+IXAuZWxpbWluYXRlZCk7XHJcbiAgICAgIGNvbnN0IG5ld1JvdW5kID0gKCk9PntcclxuICAgICAgICBzdGF0ZS5kZWNrID0gY3JlYXRlRGVjaygpO1xyXG4gICAgICAgIHN0YXRlLmJ1cm4gPSBzdGF0ZS5kZWNrLnBvcCgpO1xyXG4gICAgICAgIHN0YXRlLnBsYXllcnMuZm9yRWFjaChwPT57IHAuaGFuZD1bc3RhdGUuZGVjay5wb3AoKV07IHAuZWxpbWluYXRlZD1mYWxzZTsgcC5wcm90ZWN0ZWQ9ZmFsc2U7IH0pO1xyXG4gICAgICAgIHN0YXRlLmN1cnJlbnRQbGF5ZXJJbmRleCA9IDA7XHJcbiAgICAgICAgaWYoc3RhdGUuZGVjay5sZW5ndGg+MCkgc3RhdGUucGxheWVyc1swXS5oYW5kLnB1c2goc3RhdGUuZGVjay5wb3AoKSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpZihhY3RpdmUubGVuZ3RoIDw9IDEpe1xyXG4gICAgICAgIGNvbnN0IHdpbm5lciA9IGFjdGl2ZVswXTtcclxuICAgICAgICBpZih3aW5uZXIpIHdpbm5lci50b2tlbnMgPSAod2lubmVyLnRva2Vuc3x8MCkgKyAxO1xyXG4gICAgICAgIHN0YXRlLmxvZy5wdXNoKGAke3dpbm5lciA/IHdpbm5lci5uYW1lIDogJ05vIG9uZSd9IHdvbiB0aGUgcm91bmQgKGxhc3QgcGxheWVyIHN0YW5kaW5nKS5gKTtcclxuICAgICAgICBuZXdSb3VuZCgpO1xyXG4gICAgICAgIGF3YWl0IHVwc2VydEdhbWUoY29kZSwgc3RhdGUpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG9rOnRydWUgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmKHN0YXRlLmRlY2subGVuZ3RoID09PSAwKXtcclxuICAgICAgICBjb25zdCBsaXZpbmcgPSBzdGF0ZS5wbGF5ZXJzLmZpbHRlcihwPT4hcC5lbGltaW5hdGVkICYmIHAuaGFuZD8ubGVuZ3RoPjApO1xyXG4gICAgICAgIGlmKGxpdmluZy5sZW5ndGg+MCl7XHJcbiAgICAgICAgICBsaXZpbmcuc29ydCgoYSxiKT0+Yi5oYW5kWzBdLnZhbHVlIC0gYS5oYW5kWzBdLnZhbHVlKTtcclxuICAgICAgICAgIGxpdmluZ1swXS50b2tlbnMgPSAobGl2aW5nWzBdLnRva2Vuc3x8MCkgKyAxO1xyXG4gICAgICAgICAgc3RhdGUubG9nLnB1c2goYCR7bGl2aW5nWzBdLm5hbWV9IHdvbiB0aGUgcm91bmQgKGhpZ2hlc3QgY2FyZCB3aGVuIGRlY2sgZW1wdHkpLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBuZXdSb3VuZCgpO1xyXG4gICAgICAgIGF3YWl0IHVwc2VydEdhbWUoY29kZSwgc3RhdGUpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG9rOnRydWUgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIE5leHQgdHVyblxyXG4gICAgICBkbyB7XHJcbiAgICAgICAgc3RhdGUuY3VycmVudFBsYXllckluZGV4ID0gKHN0YXRlLmN1cnJlbnRQbGF5ZXJJbmRleCArIDEpICUgc3RhdGUucGxheWVycy5sZW5ndGg7XHJcbiAgICAgIH0gd2hpbGUoc3RhdGUucGxheWVyc1tzdGF0ZS5jdXJyZW50UGxheWVySW5kZXhdLmVsaW1pbmF0ZWQpO1xyXG4gICAgICBpZihzdGF0ZS5wbGF5ZXJzW3N0YXRlLmN1cnJlbnRQbGF5ZXJJbmRleF0ucHJvdGVjdGVkKSBkZWxldGUgc3RhdGUucGxheWVyc1tzdGF0ZS5jdXJyZW50UGxheWVySW5kZXhdLnByb3RlY3RlZDtcclxuICAgICAgaWYoc3RhdGUuZGVjay5sZW5ndGg+MCkgc3RhdGUucGxheWVyc1tzdGF0ZS5jdXJyZW50UGxheWVySW5kZXhdLmhhbmQucHVzaChzdGF0ZS5kZWNrLnBvcCgpKTtcclxuXHJcbiAgICAgIGF3YWl0IHVwc2VydEdhbWUoY29kZSwgc3RhdGUpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBvazp0cnVlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG9rOmZhbHNlLCBtZXNzYWdlOid1bmtub3duIGFjdGlvbicgfSk7XHJcbiAgfWNhdGNoKGVycil7XHJcbiAgICBjb25zb2xlLmVycm9yKCdhY3Rpb24gZXJyb3InLCBlcnIpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgb2s6ZmFsc2UsIGVycm9yOiBTdHJpbmcoZXJyKSB9KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsIlNVUEFCQVNFX1VSTCIsInByb2Nlc3MiLCJlbnYiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwic3VwYWJhc2UiLCJjcmVhdGVEZWNrIiwiY2FyZHMiLCJpIiwicHVzaCIsIm5hbWUiLCJ2YWx1ZSIsInNodWZmbGUiLCJhcnIiLCJzbGljZSIsInNvcnQiLCJNYXRoIiwicmFuZG9tIiwidXBzZXJ0R2FtZSIsImNvZGUiLCJzdGF0ZSIsImVycm9yIiwiZnJvbSIsInVwc2VydCIsIm9uQ29uZmxpY3QiLCJnZXRHYW1lIiwiZGF0YSIsInNlbGVjdCIsImVxIiwibWF5YmVTaW5nbGUiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImJvZHkiLCJhY3Rpb24iLCJwbGF5ZXJOYW1lIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJ0b1VwcGVyQ2FzZSIsInBpZCIsInBsYXllcnMiLCJpZCIsImhhbmQiLCJ0b2tlbnMiLCJlbGltaW5hdGVkIiwiZGVjayIsInN0YXJ0ZWQiLCJjdXJyZW50UGxheWVySW5kZXgiLCJsb2ciLCJjaGF0IiwiYnVybiIsInJvdyIsIm9rIiwibWVzc2FnZSIsImNhbm9uaWNhbFBpZCIsImV4aXN0cyIsImZpbmQiLCJwIiwicG9wIiwiZm9yRWFjaCIsInByb3RlY3RlZCIsImxlbmd0aCIsInNlbmRlck5hbWUiLCJ4IiwiZW50cnkiLCJzZW5kZXIiLCJ0cyIsIkRhdGUiLCJub3ciLCJjYXJkSW5kZXgiLCJ0YXJnZXRJZCIsImd1ZXNzZWRDYXJkIiwicGxheWVySW5kZXgiLCJmaW5kSW5kZXgiLCJwbGF5ZXIiLCJjYW5kaWRhdGUiLCJvdGhlciIsIl8iLCJjYXJkIiwic3BsaWNlIiwidCIsInRndCIsImFjdHVhbCIsIm15Q2FyZCIsInRoZWlyQ2FyZCIsImRpc2NhcmRlZCIsInRtcCIsImFjdGl2ZSIsImZpbHRlciIsIm5ld1JvdW5kIiwid2lubmVyIiwibGl2aW5nIiwiYSIsImIiLCJlcnIiLCJjb25zb2xlIiwiU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/game/action.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgame%2Faction&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cgame%5Caction.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();